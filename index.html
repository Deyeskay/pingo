<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PingO Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- Home Screen -->
  <div id="home-screen" class="screen active">
    <h2 style="gap: 10px;">
  <img src="https://raw.githubusercontent.com/Deyeskay/pingo/5d287c7a4665fa3f4916862fce8771d12b4dc92f/pingo_icon.png" 
       alt="Pingo Logo" 
       style="border-radius: 50%; width: 70px; ">
  <span style="font-weight: bold; font-size: 1.2em;">Pingo</span>
  <button class="small-btn" onclick="switchMode()" title="Switch mode" style="margin-left:auto;">🔁</button>
</h2>

    <p id="mode-msg"><strong>Loading...</strong></p>

    <div id="host-id-section" style="display: none;">
      <p><strong>🆔 </strong> 
        <span id="my-id">Loading...</span> 
        <span class="copy-icons" onclick="copyID()">📋</span> 
        <span class="copy-icons" onclick="shareID()">🔗</span>
      </p>
    </div>

    <div id="joiner-id-section" style="display: none;">
      <input id="peer-id-input" placeholder="Enter host ID to join">
    </div>

    <input id="nickname" placeholder="Enter your name/nickname">

    <button id="join-btn" onclick="connectToHost()">Lets Pingo</button>
    <button id="go-to-chat" onclick="validateAndGoToChat()" style="display: none;">Start Pingo</button>
  </div>

  <!-- Chat Screen -->
  <div id="chat-screen" class="screen">
    <div id="top-bar">
  <div style="display: flex; align-items: center; gap: 10px;">
    <!-- <button onclick="switchScreen(false)" class="small-btn">⬅️</button> -->
    <img src="https://raw.githubusercontent.com/Deyeskay/pingo/5d287c7a4665fa3f4916862fce8771d12b4dc92f/pingo_icon.png" style="border-radius: 50%;width: 30px;">
    <div style="font-weight: bold;text-transform: capitalize;" id="topbar-username">Username</div>
  </div>
  <div class="toolbar-icons">
    <div id="people-icon-container" onclick="showPeopleModal()" style="position: relative; cursor: pointer;">
	  <span style="font-size: 1.3em;">👥</span>
	  <span id="participant-badge" class="badge" style="display: none;">1</span>
	</div>
    <div class="dropdown">
      <span class="three-dots" onclick="toggleDropdown()">⋮</span> 
	  <div id="dropdown-menu" class="dropdown-menu">
		  <button onclick="copyID()">📋 Copy ID</button>
		  <button onclick="shareID()">🔗 Share ID</button>
		  <button onclick="exitRoom()">🚪 Leave </button>
	  </div>
    </div>
  </div>
</div>

    <div id="host-id-bar" style="margin-bottom: 10px; display: none;">
      <strong>ID:</strong>
      <span class="copy-icons" onclick="copyID()">📋</span>
      <span class="copy-icons" onclick="shareID()">🔗</span>
    </div>

    <div id="chat-box"></div>
    <div class="message-input-wrapper">
	  <span class="msg-icon-left">➕</span>
	  <input id="message" placeholder="Write anything..." />
	  <button class="send-btn" onclick="sendMessage()">⬆️</button>
	</div>

  </div>

  <!-- Participants Modal -->
  <div class="modal-bg" id="modal-bg"></div>
  <div id="people-modal">
    <h3>👥 Participants</h3>
    <p id="participant-count">Total: 0</p>
    <ul id="people-list"></ul>
    <button onclick="hidePeopleModal()">Close</button>
  </div>
  

<div id="global-toast" class="global-toast"></div>
  <!-- PeerJS -->
  <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script src="rtcpeer.js"></script>
  <script>
  document.getElementById("message").addEventListener("keydown", function(e) {
    if (e.key === "Enter") sendMessage();
  });
</script>

</body>
</html>
